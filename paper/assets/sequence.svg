<svg xmlns="http://www.w3.org/2000/svg" width="960" height="640" viewBox="0 0 960 640">
  <style>
    .life{stroke:#333;stroke-width:1}
    .title{font: 14px SimSun; font-weight:bold}
    .text{font: 12px SimSun}
    .msg{stroke:#555;stroke-width:1.5;marker-end:url(#arrow)}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L10,3 L0,6 Z" fill="#555" />
    </marker>
  </defs>

  <!-- Lifelines -->
  <text class="title" x="60" y="40">User</text>
  <line class="life" x1="80" y1="60" x2="80" y2="600" />

  <text class="title" x="220" y="40">SysLoginController</text>
  <line class="life" x1="250" y1="60" x2="250" y2="600" />

  <text class="title" x="420" y="40">SysLoginService</text>
  <line class="life" x1="450" y1="60" x2="450" y2="600" />

  <text class="title" x="590" y="40">TokenService</text>
  <line class="life" x1="620" y1="60" x2="620" y2="600" />

  <text class="title" x="770" y="40">RedisCache</text>
  <line class="life" x1="800" y1="60" x2="800" y2="600" />

  <!-- Messages: Login -->
  <line class="msg" x1="80" y1="120" x2="250" y2="120" />
  <text class="text" x="90" y="110">POST /login</text>

  <line class="msg" x1="250" y1="160" x2="450" y2="160" />
  <text class="text" x="260" y="150">validate & authenticate</text>

  <line class="msg" x1="450" y1="200" x2="620" y2="200" />
  <text class="text" x="460" y="190">createToken</text>

  <line class="msg" x1="620" y1="240" x2="800" y2="240" />
  <text class="text" x="630" y="230">setCacheObject</text>

  <line class="msg" x1="620" y1="280" x2="450" y2="280" />
  <text class="text" x="530" y="270">token</text>

  <line class="msg" x1="450" y1="320" x2="250" y2="320" />
  <text class="text" x="360" y="310">token</text>

  <line class="msg" x1="250" y1="360" x2="80" y2="360" />
  <text class="text" x="160" y="350">{Authorization: Bearer ...}</text>

  <!-- Messages: Subsequent request via filter -->
  <text class="title" x="60" y="420">JwtAuthenticationTokenFilter</text>
  <line class="life" x1="110" y1="440" x2="110" y2="600" />

  <line class="msg" x1="80" y1="480" x2="110" y2="480" />
  <text class="text" x="85" y="470">request with token</text>

  <line class="msg" x1="110" y1="520" x2="620" y2="520" />
  <text class="text" x="300" y="510">getLoginUser / verifyToken</text>

  <line class="msg" x1="620" y1="560" x2="800" y2="560" />
  <text class="text" x="630" y="550">getCacheObject</text>

  <text class="text" x="130" y="590">SecurityContext set â†’ Controller handle</text>
</svg>
